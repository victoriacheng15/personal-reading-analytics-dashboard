{{define "base"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.AnalyticsTitle}} - {{.PageTitle}}</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div id="app">
        <header>
            <div class="header-title-group">
                <h1>{{.PageTitle}}</h1>
                <time>Last updated: {{.LastUpdated.Format "Jan 02, 2006 at 3:04 PM"}}</time>
            </div>
            <nav>
                <ul>
                    <li><a href="{{.BaseURL}}index.html" {{if eq .PageTitle "ðŸ“š Personal Reading Analytics"}}aria-current="page"{{end}}>Home</a></li>
                    <li><a href="{{.BaseURL}}analytics.html" {{if (or (eq .PageTitle "ðŸ“Š Analytics") (eq .PageTitle "ðŸ“Š Analytics (Archived)"))}}aria-current="page"{{end}}>Analytics</a></li>
                    <li><a href="{{.BaseURL}}evolution.html" {{if eq .PageTitle "â³ Evolution"}}aria-current="page"{{end}}>Evolution</a></li>
                    {{if (or (eq .PageTitle "ðŸ“Š Analytics") (eq .PageTitle "ðŸ“Š Analytics (Archived)"))}}
                    <li class="history-nav-item">
                        <label for="snapshot-selector" class="visually-hidden">Select Snapshot</label>
                        <select id="snapshot-selector" class="snapshot-select" onchange="window.location.href=this.value">
                            <option value="{{.BaseURL}}analytics.html">Latest Analytics</option>
                            {{$base := .BaseURL}}
                            {{range .HistoryDates}}
                            <option value="{{$base}}history/{{.}}/analytics.html" {{if eq . $.ReportDate}}selected{{end}}>
                                {{.}}
                            </option>
                            {{end}}
                        </select>
                    </li>
                    {{end}}
                </ul>
            </nav>
        </header>
        {{block "content" .}}{{end}}
        <footer>
          <p><span role="img" aria-label="Chart Increasing">ðŸ“ˆ</span> Data sourced from personal article collection â€¢ Weekly metrics via GitHub Actions</p>
        </footer>
    </div>
    {{block "script" .}}{{end}}
</body>

</html>
{{end}}
